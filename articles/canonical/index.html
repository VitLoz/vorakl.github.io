<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><title>Vorakl's notes :: How to redirect a static website on the Github Pages</title><meta name=description content="Notes about Systems and Software Engineering"><meta name=author content="Oleksii Tsvietnov"><meta name=keywords content="vorakl,Oleksii Tsvietnov,blog,systems engineering,operations,software engineering"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=robots content=index,follow><link href=https://vorakl.com/articles/canonical/ rel=canonical><!--[if lt IE 9]>
    <script src="https://vorakl.com/theme/html5.js?v=1561400909"></script>
    <![endif]--><link rel=stylesheet href="https://vorakl.com/theme/bootstrap-pygments.bundle.min.css?v=1561400909"><link rel=alternate type=application/atom+xml href=http://feed.vorakl.com/voraklsnotes/atom title="Vorakl's notes"><link rel=apple-touch-icon sizes=180x180 href="/favicon/apple-touch-icon.png?v=1561400909"><link rel=icon type=image/png href="/favicon/favicon-32x32.png?v=1561400909" sizes=32x32><link rel=manifest href="/favicon/manifest.json?v=1561400909"><link rel=mask-icon href="/favicon/safari-pinned-tab.svg?v=1561400909" color=#205081><link rel="shortcut icon" href="/favicon/favicon.ico?v=1561400909"><meta name=msapplication-config content="/favicon/browserconfig.xml?v=1561400909"><meta name=theme-color content=#205081><meta name=apple-mobile-web-app-title content="Vorakl's notes"><meta name=application-name content="Vorakl's notes"></head> <body> <div class=navbar> <div class=navbar-inner> <div class=container> <a href=https://vorakl.com/ class=brand>Vorakl's notes</a> <a class="btn btn-navbar" data-toggle=collapse data-target=.nav-collapse> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </a> <div class=nav-collapse> <ul class="nav pull-right"> <!-- <li class="divider-vertical"></li> --> <li><a href=https://vorakl.com/pages/projects/ >Projects</a></li> <li><a href=https://vorakl.com/pages/contacts/ >Contacts</a></li> <li><a href=https://vorakl.com/pages/about/ >About</a></li> <!-- <li class="divider-vertical"></li> --> </ul> </div> </div> </div> </div> <div class=container> <div class=content> <div class=row> <div class=span9> <div class=article> <div class=content-title> <h1>How to redirect a static website on the Github Pages</h1> <div class="well small">on 2019-07-02 in <a href=https://vorakl.com/categories/howto/ >howto</a> about <a href=https://vorakl.com/tags/it/ >it</a> <a href=https://vorakl.com/tags/web/ >web</a> <a href=https://vorakl.com/tags/html/ >html</a> <a href=https://vorakl.com/tags/http/ >http</a> ~4 min read </div> <p><h3>The use case for a Temporary Redirect and the Canonical Link Element</h3></p> </div> <div><p>I'm running a few static web sites for my private projects on the <a href=https://pages.github.com/ class="reference external">Github Pages</a>. And, I'm absolutely happy with the service as it supports custom domains, automatically redirects to HTTPS, provides a transparent installation of SSL certificates (with automatic issuing via <a href=https://letsencrypt.org/ class="reference external">Let's Encrypt</a>). It works very fast (thanks to <a href=https://www.fastly.com/ class="reference external">Fastly</a> CDN) and absolutely reliable (I haven't had any issues for years). Taking into account the fact that this all is provided for free, I would say, it perfectly matches my needs at the moment. Of course, there is one but important limitation: it serves only static websites, which means no query parameters, no dynamic content generated on a server side, no options for injecting some server-side configuration (like with .htaccess), etc. I can 'push' to the website's root directory only <em>static assets</em> (html, css, js, jpeg, ...). In general, this is not a big issue. There are a lot of the open source <a href=https://www.staticgen.com/ class="reference external">static site generators</a> available, and one of the most popular (<a href=https://jekyllrb.com/ class="reference external">Jekyll</a>) is even provided by default, right from the dashboard. I personally, prefer <a class="reference external" href=https://github.com/getpelican/pelican>Pelican</a> in most cases, but sometimes it's more suitable to upload manually created and simple web pages. Nevertheless, when you need to implement something that normally used to be solved on a server side, the whole fun begins...</p> <div class=line-block> <div class=line><br></div> </div> <p>Recently, I've had to change a custom domain name for one of those my websites. A prolongation of the old one was ridiculously expensive, and I wasn't willing to continue wasting money. So, I found a cheaper alternative and immediately faced with the main problem: all search engines have the old name in their indexes. Updating indexes takes the time and obviously until it's happened, I'll need to redirect all requests to a new location. Ideally, for each indexed resource to the equivalent on the new site, but at least, any possible requests to the new start page. I'll have access to the configuration of the old domain name for enough amount of time, and therefore, I'm able to run two different sites on both domain names at the same time.</p> <div class=line-block> <div class=line><br></div> </div> <p>There is one proper solution that has to be used whenever it's possible: Permanent Redirect ('<a class="reference external" href=https://tools.ietf.org/html/rfc2616#section-10.3.2>301 Moved Permanently</a>' status code), the way of redirecting implemented in the HTTP protocol. The only issue is that it's done on a server side within the HTTP header of a server response. Apparently, the only solution I could implement resides on a client side. That is, either HTML code or JavaScript. The JS variant I didn't consider at all because I didn't want to rely on the scripts support in the web browsers. Once I defined clearly the task to myself, I immediately recalled a solution: the HTML <a class="reference external" href=https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta>meta tag</a> '<em>http-equiv</em>' with the '<a class="reference external" href=http://www.otsukare.info/2015/03/26/refresh-http-header>refresh</a>' &quot;<a class="reference external" href=https://tools.ietf.org/html/rfc2616#section-14>HTTP header</a>&quot;. Although, it can be used for asking browsers to reload a page or jump to another URL after a specified number of seconds. Having done a little research on the topic, it turned out it is much more complicated than I thought, with interesting facts and details.</p> <div class=line-block> <div class=line><br></div> </div> <p><strong>TL;DR</strong>: for all readers who think that's enough ;) here is the brief description of the solution: two repositories are configured for being served as static websites with custom domain names. On a site with the old domain, I reconstructed all directories structure of the main website and put in each of them (including the root) this <em>index.html</em></p> <div class=highlight><pre><span></span><span class=cp>&lt;!DOCTYPE HTML&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span> <span class=na>lang</span><span class=o>=</span><span class=s>&quot;en&quot;</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&quot;utf-8&quot;</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>http-equiv</span><span class=o>=</span><span class=s>&quot;refresh&quot;</span> <span class=na>content</span><span class=o>=</span><span class=s>&quot;0;url={{THE_NEW_URL}}&quot;</span> <span class=p>/&gt;</span>
        <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&quot;canonical&quot;</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;{{THE_NEW_URL}}&quot;</span> <span class=p>/&gt;</span>
    <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>
            The page been moved to <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;{{THE_NEW_URL}}&quot;</span><span class=p>&gt;</span>{{THE_NEW_URL}}<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
        <span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</pre></div> <p>Once someone opens a resource on the old domain, most web browsers will &quot;immediately&quot; redirect to the same resource on the new website (thanks to '<em>http-equiv=&quot;refresh&quot;</em>'). For those resources which were missed or for nonexistent ones it is helpful to create <em>404.html</em> file in the root directory of the old website with the same content. The last piece of the puzzle is the <a class="reference external" href=https://tools.ietf.org/html/rfc6596>Canonical Link Relation</a> (<em>rel=&quot;canonical&quot;</em>). It prevents duplicating the content as long as the implemented redirect <strong>is not permanent</strong>. From the perspective of the HTTP response, it happens when '<a class="reference external" href=https://tools.ietf.org/html/rfc2616#section-10.2.1>the request has succeeded</a>', and there has to be an indication for search engines that a resource has been moved and should be associated with a new (preferred) location.</p> <div class=line-block> <div class=line><br></div> </div> <p>I have also found out a few interesting facts related to <em>http-equiv=&quot;refresh&quot;</em> and <em>rel=&quot;canonical&quot;</em>. The HTML meta tag <em>http-equiv</em>, as known, is used for <strong>simulating</strong> the presence of an HTTP header in a server response. That is, web developers, having no access to the configuration of a web server, are able to get a similar result by &quot;injecting&quot; HTTP headers from an HTML document (the &quot;body&quot; of an HTTP response). It seems the <em>refresh</em> header is being used for many many years by all popular web browsers, but this header <strong>doesn't really exist</strong>. At least, as a standardized HTTP header. There was the plan to add it in HTTP/1.1 specification but then <a class="reference external" href=https://lists.w3.org/Archives/Public/ietf-http-wg-old/1996MayAug/0594.html>it was deferred to HTTP/1.2 (or later)</a>, which in fact has never happened.</p> <div class=line-block> <div class=line><br></div> </div> <p>The task of finding the real source URL for a resource is far from trivial. Different scheme names (http, https), query parameters (page.html, page.html?a=1), various hostnames which are resolved to the same IP address, etc. All these options make a page looks different for search engines, but the web page is still the same. It gets even worse when the same content is published on absolutely independent web services, but the content is still the same. On February 2009, '<a href=https://www.mattcutts.com/blog/canonical-link-tag/ class="reference external">Google, Yahoo, and Microsoft announced support for a new link element to clean up duplicate urls on sites</a>'. It allows webmasters to choose a canonical (preferred) URL for the group of possible URLs of the same page. This helps search engines to pick up the correct one to associate with the content and also improve <a href=https://yoast.com/rel-canonical/ class="reference external">SEO for a site</a>.</p> <!-- Links --> </div> </div> </div> <div class=span3> <div class=well style="padding: 8px 0; background-color: #FBFBFB;"> <ul class="nav nav-list"> <li class=nav-header> Menu </li> <li><a href=https://vorakl.com/pages/projects/ >Projects</a></li> <li><a href=https://vorakl.com/pages/contacts/ >Contacts</a></li> <li><a href=https://vorakl.com/pages/about/ >About</a></li> </ul> </div> <div class=well style="padding: 8px 0; background-color: #FBFBFB;"> <ul class="nav nav-list"> <li class=nav-header> Site </li> <li><a href=https://vorakl.com/articles/ ><img class=iconmenu src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAn1BMVEVHcEzuQyFDqUP/dlSpu8z////d7v+pqanuQyHMIQCH7oeampqFhYVUu1S7dmWpqallmMz3XTv1WTfu7u6YzP/MzMzdMhDVh392dnbbMA7vRiTTe2/YLQvVKgjSaVnp9P/kORfk8f/RJgR3qt7u9v/QVD/g7/9votbOIwHWKwnz+f9/suXNLQ5pnNDPPyXMIQD4/P+Guu38/v+UyPuOwvXUfcTEAAAACnRSTlMA////////gL+/p4E1rgAAAJNJREFUeAFNygMOxAAUhOF6rdq2df+z7dT9i0m+PAJdPpfToIfw2Add9af05H8/HqNfAS79Vt80msYFZKTIfsm1DNCkvmVqsqyZlp82AJE9JQKGnqKoF15MPwDGlrrfX/NLtSOgy5m9vAMUIcOy6xsWgMA5LpwAkHjHhZcAqvi4iCvAlzv1BdzKOrINRTHsqC5vxB8wAwzldAteLAAAAABJRU5ErkJggg==" alt=[Archive]>Archive</a></li> <li><a href=https://vorakl.com/allarticles/ ><img class=iconmenu src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAn1BMVEVHcEzuQyFDqUP/dlSpu8z////d7v+pqanuQyHMIQCH7oeampqFhYVUu1S7dmWpqallmMz3XTv1WTfu7u6YzP/MzMzdMhDVh392dnbbMA7vRiTTe2/YLQvVKgjSaVnp9P/kORfk8f/RJgR3qt7u9v/QVD/g7/9votbOIwHWKwnz+f9/suXNLQ5pnNDPPyXMIQD4/P+Guu38/v+UyPuOwvXUfcTEAAAACnRSTlMA////////gL+/p4E1rgAAAJNJREFUeAFNygMOxAAUhOF6rdq2df+z7dT9i0m+PAJdPpfToIfw2Add9af05H8/HqNfAS79Vt80msYFZKTIfsm1DNCkvmVqsqyZlp82AJE9JQKGnqKoF15MPwDGlrrfX/NLtSOgy5m9vAMUIcOy6xsWgMA5LpwAkHjHhZcAqvi4iCvAlzv1BdzKOrINRTHsqC5vxB8wAwzldAteLAAAAABJRU5ErkJggg==" alt="[All posts]">All posts</a></li> <li><a href=https://vorakl.com/categories/ ><img class=iconmenu src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAflBMVEVHcEzMmGXKlmPy0bL/5czHk2Dvzqz84cfHk2DEkF353MDAjFn11re7h1Twzq7jvJe3g1Drx6Peto7Jm2+yf0zy0rLlv5jClWjgt42uekepdkPbsIOkcT7Wp3qgbTrSoXGdajfPnGqaZzSYZTKbaDWeaziibzyndEGreEWwfEnOm7M9AAAAJHRSTlMA/////////7///////////////////////////////////7/uB1ikAAAAW0lEQVR4AYXNpQEDURBF0fs+6pAP9F9TfLCCZeY9angEopDREEaCLEvbglc90YxY58RQ5sxKQSkVOas6z6hE56jYQCV19k/pSPvFXva/7BaeDN30UOXNJaswlQOK2Bmf70dgXAAAAABJRU5ErkJggg==" alt=[categories]>Categories</a></li> <li><a href=https://vorakl.com/tags/ ><img class=iconmenu src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABaUlEQVR4AY2TA7IeQRRGexMpZxnZQryM2LZt27Zt27Ztc3TyTvymfk3Vufi+W6PuDtNOsbcKcuyt065hqIQw5URK/nr8IUO9ohtMPBqRZrDh1BMaTzuF2f7huwy9sjcYd+grcQpmhT+93Hub/tWLEUbv/8S3BA7ejbA224vcfp2gXvQGw3e/23vjZczniGowLSDW+lVzFLyBYfD2V1x9FvHhG0g0MZDtaYBYq+k7V/AG0n/zMy4++c6bL/BxVCDZ1QBONTbbq+vjXMEbSK91Dzn76BsvPsOLgYFobS3YXcdsr66PcwVvIN1W3uXk/a88/Qj3ewS+zqoBS2ua7dX1ca7gDaTT0pscu/uFR+/hWvvA5zH+0F/ZXl3fuaLr227hVQ7f/sz9d3C+RfA/iLWaHs44XJTW8y5x8OYn7r71fwaxVkMv9wmFaTH7PPtufOT2G8QatcI/sQhNZ5xh3/WPgnV+GSvCgyZ5/QeQVjev4io8YwAAAABJRU5ErkJggg==" alt=[tags]>Tags</a></li> <li><a href=http://feed.vorakl.com/voraklsnotes/atom rel=alternate><img class=iconmenu src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB2ElEQVR4AaWTA5AcURiE5y62bZtlOy7Gtm3btm3bPNu2ba0Hnengxby/qqt6//d17+5A6rtgUKkkTP72mg4Fu+qgaG99lBxqAuPR5jCfaAWKnjuekSH7TUHu1hoOpuOtgJu9/0pkmREFmRurQ7veEzjfETjR6rciQ5YZUZC2rhrUK92gHmsBqApQlAgt5hE0h2VQz/fi/huRZUYUJK6sAvliZ1j1/6n4HIQaeQdafiw4avxLyPeH80yILDOiIHZpZVjPdYBxX4NvZH29CGpOONQMf1huDxF7ssyIgogFFWE+1QaFO2sDihVKmjfMzltQfKInDHdGQMkOgy3mGYoOtwMZssyIguDZFWDS/1vu1uowue+FLf4tOJbQm8g/0hWGZ3PBKXk6G2TIMiMK/KaVg0H/bxkbKgkVv1j6MfRuPT9Dzo2GWS+kJ8uMKPCaVBbF+xsiZU05KAVJKHi2iB7mmNewJnvQwxh4BXJeHD1ZMCMKXMfao3BPPSSssANHLkikR6Hjdmiy5aN/twWaKtOTBTOiwGmUHQr0i5O+viLilkm/FRmyzIiCt8Mkh/D5FfmM/5XIMiMKqNdDJAeHERLcxtnDZ0pZBM0qj7B5FSl67ngGMmS/fRtLofdMUk3gzHxD5AAAAABJRU5ErkJggg==" alt=[rss]>RSS feed</a></li> <li><a href="https://feedburner.google.com/fb/a/mailverify?uri=voraklsnotes/atom&loc=en_US"><img class=iconmenu src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABF0lEQVR4AcWTA2+0YRREn7/02bZt20Zt27Ztxduotm3bbqed2kaSk53cO2dfiws/r26Ijf8BrN9J4PAVcP8PBKoAUQZAtA0Q6wok+RBmzrhjh13QoSuGLF4zAGhZE3Toij6T50CSNwcAmlYFu3Toik79RwDqgCRPLpiXhR12memKFq27AKoAkuSOasUrzIvCHTvMhK6oU7kOoHSGJBckvdvNPAfOuJs9oysq5S8BKCRk8ihOFObAGXezu3RF8f8zAHIIr28mJznMZtEOXZH36ziADC74uwpmunRF5tdDk4OUNUGHrkj9uA9A0rqgK8ZukCT122FkSJ9DjvotFJq+QKnTV1T6SqEmTIkwc8YdO+yCDt2d/xpHAfBe0adnP0QCAAAAAElFTkSuQmCC alt=[mail]>Subscribe by Email</a></li> </ul> </div> </div> </div> </div> <footer> <div class=container> <div class=row> <div class=span5> <span class=pull-left> &copy; 2019 <a href=https://vorakl.com/pages/about/ >Oleksii Tsvietnov</a> All Rights Reserved </span> </div> <div class=span3> <a href=http://feeds.feedburner.com/voraklsnotes/atom><img src="http://feeds.feedburner.com/~fc/voraklsnotes/atom?bg=2e435e&fg=FFFFFF&anim=0" height=26 width=88 style=border:0 alt></a> </div> <div class=span4> <div class=pull-right> Powered by <a href=https://github.com/getpelican/pelican>Pelican</a> and <a href=https://aves.cf/ >Aves</a> theme </div> </div> </div> </div> </footer> </div> <script src="https://vorakl.com/theme/jquery-bootstrap-collapse.bundle.min.js?v=1561400909"></script> <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-142190768-1 ', 'auto');
ga('send', 'pageview');
</script> </body> </html>